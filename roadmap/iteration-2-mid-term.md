# –ò—Ç–µ—Ä–∞—Ü–∏—è 2 ‚Äî –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (2-6 –Ω–µ–¥–µ–ª—å)

> –¶–µ–ª—å: —É—Å–∏–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—É—é –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –ø–æ–∫—Ä—ã—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —É–ª—É—á—à–∏—Ç—å Dev Experience.

## 1. –û–±–∑–æ—Ä –∑–∞–¥–∞—á

| ‚Ññ   | –ó–∞–¥–∞—á–∞                                                               | –í—ã–≥–æ–¥–∞                                                 | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π      | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| --- | -------------------------------------------------------------------- | ------------------------------------------------------ | ------------------ | --------- |
| 1   | –í–Ω–µ–¥—Ä–∏—Ç—å **E2E-—Ç–µ—Å—Ç—ã** (Playwright)                                  | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ ¬´—Å–∫–≤–æ–∑—å –≤–µ—Å—å —Å—Ç–µ–∫¬ª | QA Engineer        | üî•        |
| 2   | –ü–æ–¥–∫–ª—é—á–∏—Ç—å **Sentry** (frontend) + Supabase logs                     | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ             | DevOps             | üî•        |
| 3   | –í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥–∏ –≤ `.env.example`, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ CI             | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π onboarding                   | DevOps             | üî•        |
| 4   | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å `ImageWithFallback` –≥–ª–æ–±–∞–ª—å–Ω–æ | –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, UX                       | Frontend           | üü°        |
| 5   | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å **Supabase Migrations** (db versioning)                    | –ù–∞–¥—ë–∂–Ω—ã–µ –¥–µ–ø–ª–æ–∏, –æ—Ç–∫–∞—Ç—ã                                | Backend            | üü°        |
| 6   | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π —Å—Ç–æ–ª–æ–≤**                     | –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –≤–∏–¥–µ—Ç—å –≤—Å–µ –±—Ä–æ–Ω–∏                 | Frontend & Backend | üî•        |
| 7   | ~~–î–æ–±–∞–≤–∏—Ç—å **—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è Telegram-–±–æ—Ç–∞** –æ –Ω–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö~~ ‚úÖ  | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞                    | Backend            | üü°        |

> üî• ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å.

## 2. –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 2.1 E2E-—Ç–µ—Å—Ç—ã Playwright

1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `e2e/` —Å –ø–µ—Ä–≤—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º: –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∞ ‚û°Ô∏è –æ–ø–ª–∞—Ç–∞
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `playwright.config.ts` (Chromium + Firefox, CI-—Ä–µ–∂–∏–º)
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ CI: —à–∞–≥ –ø–æ—Å–ª–µ unit-—Ç–µ—Å—Ç–æ–≤

### 2.2 Sentry + Supabase logs

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Sentry, –ø–æ–ª—É—á–∏—Ç—å DSN.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK:
   ```bash
   pnpm add @sentry/react @sentry/tracing
   ```
3. ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `src/main.tsx` —Å release –∏–∑ env.
4. –í–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –≤–µ—Å–æ–º—ã—Ö –æ—à–∏–±–æ–∫.
5. –î–ª—è Supabase ‚Äî –≤–∫–ª—é—á–∏—Ç—å **log drains** ‚û°Ô∏è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Logflare.

### 2.3 .env –∏ —Å–µ–∫—Ä–µ—Ç—ã

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `.env.example` c –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å **dotenv-expand** –≤ Vite.
3. ‚úÖ –í CI: –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ GitHub Secrets ‚û°Ô∏è `env` step.
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `.env` –∏—Å–∫–ª—é—á—ë–Ω `.gitignore`.

### 2.4 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç `vite-imagetools` –∏–ª–∏ `@next/optimized-images` (–ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏).
2. ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<ImageWithFallback>` –∏–∑ `components/figma/` ‚û°Ô∏è `components/common/`.
3. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∑–∞–º–µ–Ω–∏–≤ `<img>` –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.
4. Lighthouse score Image ‚Üí 90+.

### 2.5 Supabase Migrations

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `database/migrations`.
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase CLI (`supabase db push`, `supabase db diff`).
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å workflow `supabase-migrations.yml`.

### 2.6 –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

1. –°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª ¬´–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è¬ª –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π `AdminPanel.tsx`.
2. –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase —Ç–∞–±–ª–∏—Ü—ã `table_bookings` (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ/–≤—Ä–µ–º–µ–Ω–∏).
3. –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: –¥–∞—Ç–∞, —Å—Ç–∞—Ç—É—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π.
4. –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ / –æ—Ç–º–µ–Ω–µ–Ω–æ).
5. –û–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ Supabase Realtime.

### 2.7 Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

1. –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather, –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω.
2. ‚úÖ Edge Function `notify_telegram` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–º **insert** –≤ `table_bookings`.
3. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –¥–∞–Ω–Ω—ã–º–∏: –∏–º—è, –¥–∞—Ç–∞, –≤—Ä–µ–º—è, –≥–æ—Å—Ç–∏.
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `TELEGRAM_BOT_TOKEN`, `CHAT_ID` —á–µ—Ä–µ–∑ secrets CI.
5. –õ–æ–≥–∏ –æ—à–∏–±–æ–∫ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –≤ Sentry.

## 3. –ì—Ä–∞—Ñ–∏–∫

| –ù–µ–¥–µ–ª—è | –ü–Ω         | –í—Ç              | –°—Ä     | –ß—Ç         | –ü—Ç     |
| ------ | ---------- | --------------- | ------ | ---------- | ------ |
| 3      | Playwright | Playwright      | Sentry | Sentry     | Docs   |
| 4      | Env config | Images          | Images | Migrations | Review |
| 5      | CI updates | E2E maintenance | Buffer | Buffer     | Demo   |
| 6      | üéâ Release | ‚Äî               | ‚Äî      | ‚Äî          | ‚Äî      |

## 4. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã E2E-—Ç–µ—Å—Ç–∞–º–∏ –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç.
- –û—à–∏–±–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤–∏–¥–Ω—ã –≤ Sentry, alert –Ω–∞ e-mail.
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç `.env.example`; —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ git-–∏—Å—Ç–æ—Ä–∏—é.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `<ImageWithFallback>` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º –≤ 80 % –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `supabase db reset`.

## 5. –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã

| –†–∏—Å–∫                      | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ú–∏—Ç–∏–≥–∏—Ä–æ–≤–∞–Ω–∏–µ                     |
| ------------------------- | ----------- | --------------------------------- |
| Flaky-E2E —Ç–µ—Å—Ç—ã           | –°—Ä–µ–¥–Ω—è—è     | –†–∞–Ω Rerun, –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, mocks |
| –õ–∏–º–∏—Ç—ã Sentry (free tier) | –ù–∏–∑–∫–∞—è      | –ü–æ—Ä–æ–≥ alert, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è         |

---

‚úÖ **–í—ã—Ö–æ–¥–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**

- –ü–∞–ø–∫–∞ `e2e/` + –æ—Ç—á—ë—Ç Playwright
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Sentry
- `.env.example` –∏ –∫–æ–Ω—Ñ–∏–≥–∏ CI
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ö–∞—Ç–∞–ª–æ–≥ `database/migrations/`
